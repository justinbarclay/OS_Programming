                                                                        +-----------------+
                                                                        |  Read item from |
                                                                        |  file           |
                                                                        |                 |
                                                                        |                 |
                                                                        +--------+--------+
                                                                                 |
                                                                                 |
                                                                                 |
                                                                                 |
                                                                        +--------+---------+
                                                                        |Get pagenumber    |
                                                                        |from integer      |
                                                                        |       -          |
                                                                        |                  |
                                                                        +--------+---------+
                                                                                 |
                                                                                 |
                                                                                 |                           
                                                                                 |
                                                                                 |
                                                                        +--------------------+
                                                                        | Use pagenum and PID|
                                                                        | to look up in TLB  |
                                                                        |                    |
                                                                        |                    |
                                                                        +---------+----------+
                                                                                  |
                                                                                  |
                                                                                  |
                                                                                  |
                                                                        +----------------------+
                                                                        |      In TLB?         |
                                                                        |                      |
                                                                        | yes               no |
                                                                        +--/-----------------\-+
                                                                         -/                   \-
                                                                       -/                       \-
                                                                     -/                           \-
                                                                   -/                               \-
                                                                 -/                                   \-
                                                               -/                                       \-
                                                              /   |---\                                  \
                                                       +------------+   ---------\                     +----------------+
                                                       |    LRU?    |             ---------\           | In page table? |
                                                       |yes       no|                       ---------\ | yes          no|
                                                       +-/----------+                                 -+---------------++
                                                        /                                                              |
                                                       /                                                               |
                                                     -/                                                                |
                                                    /                                                                  |
                                           +---------------+                                                           |        
                                           |Put to top of  |                      +-----------+             +------------------+             +--------------+
                                           |stack in VM    |                      |           |             |  Get new frame   |             |Out of frames?|
                                           |               |----------\           |   LRU?    +-------------|  from VM and     |-------------+              |
                                           |               |           -----------+yes        |             |                  |             |       yes    |
                                           +---------------+                      +-----------+             +---------+--------+\            +-------+------+
                                                                                                                      |           -\                 |
                                                                                                                      |             -\               |
                                                                                                                      |               -\             |
                                                                                                                      |                 --\          |
                                                                                                            +---------+---------+          -\        |
                                                                                                            |Update Page table  |            -\+-----+----------+
                                                                                                            |                   |              +-Remove element |
                                                                                                            |                   |              | at tail        |
                                                                                                            +---------+---------+              |                |
                                                                                                                      |                        +----------------+
                                                                                                                      |
                                                                                                                      |
                                                                                                                      |
                                                                                                             +--------+---------+
                                                                                                             |Update TLB        |
                                                                                                             |                  |
                                                                                                             |                  |
                                                                                                             +------------------+
